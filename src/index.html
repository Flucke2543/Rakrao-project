<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Rakrao Admin</title></head>
<body style="font-family: sans-serif; padding: 20px;">
    <h1>üå≥ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ Rakrao</h1>
    <input type="text" id="n" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
    <input type="number" id="p" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
    <button onclick="add()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    <hr>
    <div id="out"></div>
    <script>
        async function add() {
            const name = document.getElementById('n').value;
            const price = document.getElementById('p').value;
            await fetch('/api/products', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ name, price })
            });
            document.getElementById('n').value = '';
            document.getElementById('p').value = '';
            load();
        }
        async function load() {
            const r = await fetch('/api/products');
            const d = await r.json();
            document.getElementById('out').innerHTML = d.map(x => `<p>‚úÖ ${x.name} - ${x.price} ‡∏ö‡∏≤‡∏ó
            <button onclick="edit(${x.id})">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <button onclick="del(${x.id})">‡∏•‡∏ö</button>
            </p>`).join('');
        }
        load(); //‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
        async function del(id) {
    if (confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?')) {
        await fetch('/api/products/' + id, { method: 'DELETE' });
        load(); // ‡∏•‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        }
        async function edit(id) {
        const newName = prompt("‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà:");
        const newPrice = prompt("‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà:");
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏Å‡∏î Cancel
        if (newName && newPrice) {
            await fetch('/api/products/' + id, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: newName, price: Number(newPrice) })
            });
            load(); // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    </script>
</body>
</html>
