const express = require('express'); //à¸›à¸£à¸°à¸à¸²à¸¨à¸Šà¸·à¹ˆà¸­à¹€à¸£à¸µà¸¢à¸à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸—à¸µà¹ˆà¹€à¸£à¸²à¹„à¸›à¸«à¸¢à¸´à¸šà¸¡à¸²à¸ˆà¸²à¸ Library
const path = require('path'); //à¸›à¸£à¸°à¸à¸²à¸¨à¹€à¸£à¸µà¸¢à¸à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¹€à¸£à¸µà¸¢à¸‡à¸¥à¸³à¸”à¸±à¸šà¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹„à¸Ÿà¸¥à¹Œ 
const app = express(); //à¸ªà¸£à¹‰à¸²à¸‡à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸šà¸™à¸«à¸™à¹‰à¸²à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¹ƒà¸ªà¹ˆà¸—à¸¸à¸à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¸¥à¸‡à¹„à¸› à¹€à¸«à¸¡à¸·à¸­à¸™à¸ªà¸¡à¸­à¸‡à¸«à¸¥à¸±à¸à¹à¸•à¹ˆà¸§à¹ˆà¸²à¹à¸„à¹ˆà¸­à¸¸à¹ˆà¸™à¹€à¸„à¸£à¸·à¸­à¸‡à¸à¹ˆà¸­à¸™
const port = process.env.PORT || 3000; //à¸à¸´à¸à¸±à¸”à¸‚à¸­à¸‡à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸—à¸µà¹ˆà¸ˆà¸°à¸šà¸­à¸à¸à¸±à¸šà¸„à¸­à¸¡à¸à¸´à¸§à¹€à¸•à¸­à¸£à¹Œà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸™à¸±à¹‰à¸™à¹†à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™ à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸«à¸™à¸¶à¹ˆà¸‡à¸‚à¸­à¸‡ IPà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡

//à¸ªà¸£à¹‰à¸²à¸‡à¸•à¸±à¸§à¹à¸›à¸¥à¸ à¸²à¸©à¸² J.son
app.use(express.json()); 

// ğŸ‘‰ à¹€à¸£à¸µà¸¢à¸ routes à¸ªà¸´à¸™à¸„à¹‰à¸²
const productRoutes = require('./routes/product.routes');
app.use('/api/products', productRoutes);

// --- ğŸŒ [à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 1: à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š (HTML Routes)] ---
// 1. à¸«à¸™à¹‰à¸²à¹à¸£à¸ (Marketplace) - à¸„à¸™à¸‹à¸·à¹‰à¸­à¹€à¸‚à¹‰à¸²à¸¡à¸²à¸”à¸¹à¸ªà¸´à¸™à¸„à¹‰à¸²à¸ªà¸§à¸¢à¹†
app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'index.html'));
});
// 2. à¸«à¸™à¹‰à¸²à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸² (Products Management)
app.get('/products', (req, res) => {
    res.sendFile(path.join(__dirname, 'login.html'));
});
// 3. à¸«à¸™à¹‰à¸²à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸² (Vendor Dashboard) - à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¸¡à¸µà¸›à¸¸à¹ˆà¸¡ à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸š/à¹à¸à¹‰à¹„à¸‚ (à¸¢à¹‰à¸²à¸¢à¸¡à¸²à¸ˆà¸²à¸ index à¹€à¸”à¸´à¸¡)
app.get('/vendor/manage', (req, res) => {
    res.sendFile(path.join(__dirname, 'src', 'vendor.html'));
});

//
app.listen(port, () => {
    //
    console.log(`
    ğŸŒ³ Rakrao Marketplace System is Running!
    -----------------------------------------
    ğŸ  Market Front: http://localhost:${port}
    ğŸ”‘ Login Page:   http://localhost:${port}/login
    âš™ï¸ Management:   http://localhost:${port}/vendor/manage
    -----------------------------------------
    `);
});
