<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>sart ≈äÃÉern | ‡∏™‡∏≤‡∏£‡∏ó‡πÄ‡∏á‡∏¥‡∏ô Market  </title>
</head>
<body style="background-color: #121212; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex;">

    <div id="account-section" style="width: 280px; background-color: #1e1e1e; height: 100vh; position: fixed; border-right: 1px solid #333; display: flex; flex-direction: column;">
        
        <div onclick="location.href='/login'" style="padding: 25px; background: #252526; cursor: pointer; border-bottom: 1px solid #333;" onmouseover="this.style.background='#2d2d2d'" onmouseout="this.style.background='#252526'">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div style="width: 45px; height: 45px; background: #4caf50; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 20px;">üë§</div>
                <div>
                    <div style="font-weight: bold; color: #fff;">ACCOUNT</div>
                    <div style="font-size: 11px; color: #888;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö?></div>
                </div>
            </div>
        </div>

        <div style="padding: 20px;">
            <input type="text" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..." style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #121212; color: white; box-sizing: border-box;">
        </div>

        <nav style="flex-grow: 1; padding: 10px;">
            <div style="color: #666; font-size: 11px; padding: 10px; text-transform: uppercase;">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</div>
            <div style="padding: 12px 15px; color: #4caf50; background: #2d2d2d; border-radius: 8px;"> ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        </nav>
    </div>

    <div style="margin-left: 280px; padding: 40px; width: 100%;">
        <h1 style="margin-top: 0; color: #4caf50;">üåø Sart ≈äÃÉern</h1>
        <p style="color: #888;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
        <hr style="border: 0; border-top: 1px solid #333; margin-bottom: 30px;">
        
        <div id="market-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px;">
            </div>
    </div>

    <script>
        async function loadMarket() {
            const res = await fetch('/api/products');
            const data = await res.json();
            
            document.getElementById('market-list').innerHTML = data.map(x => `
                <div style="background: #1e1e1e; border-radius: 12px; overflow: hidden; border: 1px solid #333; transition: 0.3s; position: relative;">
                    <div style="height: 160px; background: #2a2a2a; display: flex; align-items: center; justify-content: center; font-size: 50px;">üêü</div>
                    <div style="padding: 15px;">
                        <h3 style="margin: 0; font-size: 18px; color: #fff;">${x.name}</h3>
                        <p style="color: #4caf50; font-size: 20px; font-weight: bold; margin: 10px 0;">‡∏ø${x.price}</p>
                        <button style="width: 100%; padding: 10px; background: #4caf50; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">‡∏´‡∏¢‡∏¥‡∏ö‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                    </div>
                </div>
            `).join('');
        }
        loadMarket();
        // --- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ---
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const accountSection = document.getElementById('account-section');

            if (isLoggedIn === 'true') {
                // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏ô‡∏π ACCOUNT ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                accountSection.children[0].innerHTML = `
                    <div style="display: flex; flex-direction: column; gap: 10px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                            <div style="width: 45px; height: 45px; background: #ffd700; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 20px;">üåø</div>
                            <div>
                                <div style="font-weight: bold; color: #ffd700;">Sart ≈äÃÉern Admin</div>
                                <div style="font-size: 11px; color: #888;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</div>
                            </div>
                        </div>
                        <a href="/vendor/manage" style="text-decoration: none; color: #fff; background: #2d2d2d; padding: 10px; border-radius: 8px; text-align: center; font-size: 14px; border: 1px solid #444;">‚öôÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô</a>
                        <button onclick="logout()" style="background: none; border: 1px solid #ff5252; color: #ff5252; padding: 8px; cursor: pointer; border-radius: 5px; margin-top: 5px; font-size: 12px;">Logout</button>
                    </div>
                `;
                accountSection.children[0].onclick = null;
                accountSection.children[0].style.cursor = "default";
            }
        }

        function logout() {
            localStorage.removeItem('isLoggedIn');
            window.location.reload();
        }

        // ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        checkLoginStatus();
    </script>
</body>
</html>
